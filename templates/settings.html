<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ | Osu! Bot</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        :root {
            --osu-pink: #ff66aa;
            --twitch-purple: #6441a5;
            --dark-bg: #0f0f0f;
            --input-bg: rgba(20, 20, 20, 0.9);
        }

        body { 
            background-color: var(--dark-bg); 
            color: #efefef; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            min-height: 100vh; 
            background-image: url('/static/img/bg.jpg'); 
            background-size: cover; 
            background-position: center; 
            background-attachment: fixed; 
        }

        body::before { 
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0, 0, 0, 0.8); z-index: -1; 
        }

        .container { max-width: 900px; padding-top: 40px; }
        
        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞: –¢–µ–∫—Å—Ç —Ç–µ–ø–µ—Ä—å –í–°–ï–ì–î–ê –≤–∏–¥–Ω–æ */
        .form-control {
            background-color: var(--input-bg) !important; 
            border: 1px solid rgba(255, 255, 255, 0.1) !important; 
            color: #00ffcc !important; /* –Ø—Ä–∫–∏–π –±–∏—Ä—é–∑–æ–≤—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
            border-radius: 15px !important;
            padding: 12px 15px;
            font-weight: 500;
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.3) !important;
        }

        /* –§–∏–∫—Å –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ */
        .form-control:focus {
            background-color: #000 !important;
            border-color: var(--osu-pink) !important;
            box-shadow: 0 0 10px rgba(255, 102, 170, 0.3);
            color: #fff !important;
            outline: none;
        }

        input:-webkit-autofill,
        input:-webkit-autofill:hover, 
        input:-webkit-autofill:focus {
            -webkit-text-fill-color: #00ffcc !important;
            -webkit-box-shadow: 0 0 0px 1000px #1a1a1a inset !important;
            transition: background-color 5000s ease-in-out 0s;
        }

        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ç—è–Ω—É—Ç—ã—Ö –∏–∫–æ–Ω–æ–∫ */
        .custom-icon { 
            width: 45px; 
            height: 45px; 
            object-fit: contain; /* –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏, –Ω–µ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç */
            margin-right: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 5px;
        }

        .section-card { 
            padding: 25px; 
            border-radius: 20px; 
            margin-bottom: 25px; 
            border: 1px solid rgba(255,255,255,0.05);
            transition: 0.3s;
        }
        .section-card:hover { transform: translateY(-5px); }
        .section-twitch { background: linear-gradient(135deg, #6441a5 0%, #2a0845 100%); }
        .section-osu { background: linear-gradient(135deg, #ff66aa 0%, #ff0055 100%); }

        .obs-box { 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(10px);
            padding: 20px; 
            border-radius: 20px; 
            margin-bottom: 30px; 
            border: 1px dashed rgba(255,255,255,0.2);
        }

        .btn-save { 
            background: #fff; color: #000; 
            font-weight: 800; padding: 15px 50px; 
            border-radius: 50px; border: none; transition: 0.3s;
        }
        .btn-save:hover { background: var(--osu-pink); color: #fff; transform: scale(1.05); }
        
        .help-link { font-size: 0.75rem; color: rgba(255,255,255,0.7); text-decoration: underline; }
    </style>
</head>
<body>

<div class="container pb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–æ—Ç–∞</h2>
        <a href="/" class="btn btn-outline-light btn-sm px-3" style="border-radius: 50px;">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>

    <div class="obs-box">
        <label class="fw-bold mb-2">üé¨ –°—Å—ã–ª–∫–∞ –¥–ª—è OBS (Browser Source)</label>
        <div class="input-group">
            <input type="text" id="obs-link" class="form-control" readonly style="background: rgba(0,0,0,0.3) !important;">
            <button class="btn btn-light" onclick="copyLink()" style="border-radius: 0 15px 15px 0 !important;">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="section-card section-twitch h-100">
                <div class="d-flex align-items-center mb-4">
                    <img src="/static/img/twitch.png" onerror="this.src='https://pngimg.com/uploads/twitch/twitch_PNG6.png'" class="custom-icon">
                    <h4 class="m-0 fw-bold">Twitch Chat</h4>
                </div>
                <div class="mb-3">
                    <label class="form-label d-flex justify-content-between">
                        OAuth Token <a href="https://twitchapps.com/tmi/" target="_blank" class="help-link">–ü–æ–ª—É—á–∏—Ç—å</a>
                    </label>
                    <input type="password" id="token" class="form-control" value="{{ config.token or '' }}" placeholder="oauth:xxxxxxx">
                </div>
                <div class="mb-3">
                    <label class="form-label">–ù–∏–∫ –∫–∞–Ω–∞–ª–∞</label>
                    <input type="text" id="channel" class="form-control" value="{{ config.channel or '' }}" placeholder="username">
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="section-card section-osu h-100">
                <div class="d-flex align-items-center mb-4">
                    <img src="/static/img/osu.png" onerror="this.src='https://upload.wikimedia.org/wikipedia/commons/d/d3/Osu%21Logo_2016.svg'" class="custom-icon">
                    <h4 class="m-0 fw-bold">osu! API v2</h4>
                </div>
                <div class="mb-3">
                    <label class="form-label d-flex justify-content-between">
                        Client ID & Secret <a href="https://osu.ppy.sh/home/settings#oauth" target="_blank" class="help-link">–°–æ–∑–¥–∞—Ç—å</a>
                    </label>
                    <input type="text" id="osu_id" class="form-control mb-2" placeholder="ID" value="{{ config.osu_client_id or '' }}">
                    <input type="password" id="osu_secret" class="form-control" placeholder="Secret" value="{{ config.osu_client_secret or '' }}">
                </div>
                <div class="mb-3">
                    <label class="form-label">–ù–∏–∫ –≤ –∏–≥—Ä–µ</label>
                    <input type="text" id="osu_user" class="form-control" value="{{ config.osu_username or '' }}">
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-5">
        <button class="btn-save" onclick="saveData()">–°–û–•–†–ê–ù–ò–¢–¨ –ö–û–ù–§–ò–ì</button>
    </div>
</div>

<script>
    // –ê–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –¥–ª—è –û–ë–°
    window.onload = function() {
        document.getElementById('obs-link').value = window.location.origin + '/obs';
    };

    function copyLink() {
        const copyText = document.getElementById("obs-link");
        copyText.select();
        document.execCommand("copy");
        alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!");
    }

    async function saveData() {
        const data = {
            token: document.getElementById('token').value,
            channel: document.getElementById('channel').value,
            osu_client_id: document.getElementById('osu_id').value,
            osu_client_secret: document.getElementById('osu_secret').value,
            osu_username: document.getElementById('osu_user').value
        };

        const response = await fetch('/save_config', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        });

        if (response.ok) {
            alert("‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã! –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...");
        } else {
            alert("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏");
        }
    }
</script>

</body>
</html>





